stage('test-examples') {              
    if (env.SGX == "1") {
        env.MODE = "sgx"
    }
    else {
        env.MODE = "direct"
    }

    try {
        timeout(time: 5, unit: 'MINUTES') {
            sh '''
                cd CI-Examples/nodejs
                if [ "${os_release_id}" != 'ubuntu' ]
                then
                    sed -i "s/{{ nodejs_dir }}\\/nodejs/{{ nodejs_dir }}\\/node/g" nodejs.manifest.template
                fi
                make ${MAKEOPTS} all
                make ${MAKEOPTS} check | tee RESULT
            '''
        }
    } catch (Exception e) { }
}
